---
---

<nav class="nav" id="nav">
  <div class="nav-inner container">
    <a href="#hero" class="nav-logo" aria-label="Home">
      <img src="/favicon.svg" width="40" height="40" alt="DV"/>
    </a>

    <ul class="nav-links">
      <li><a href="#about">About</a></li>
      <li><a href="#skills">Skills</a></li>
      <li><a href="#experience">Experience</a></li>
      <li><a href="#projects">Projects</a></li>
      <li><a href="#writing">Writing</a></li>
      <li><a href="#contact">Contact</a></li>
    </ul>

    <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
      <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/>
        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
        <line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/>
        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
      </svg>
      <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
      </svg>
    </button>

    <button class="hamburger" id="hamburger" aria-label="Open menu">
      <span></span><span></span><span></span>
    </button>
  </div>
</nav>

<!-- Mobile overlay -->
<div class="mobile-menu" id="mobileMenu">
  <button class="mobile-close" id="mobileClose" aria-label="Close menu">✕</button>
  <ul>
    <li><a href="#about" class="mobile-link">About</a></li>
    <li><a href="#skills" class="mobile-link">Skills</a></li>
    <li><a href="#experience" class="mobile-link">Experience</a></li>
    <li><a href="#projects" class="mobile-link">Projects</a></li>
    <li><a href="#writing" class="mobile-link">Writing</a></li>
    <li><a href="#contact" class="mobile-link">Contact</a></li>
  </ul>
</div>

<style>
  .nav {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 100;
    padding: 1rem 0;
    transition: background 300ms, box-shadow 300ms;
  }

  .nav.scrolled {
    background: color-mix(in srgb, var(--bg) 85%, transparent);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    box-shadow: 0 1px 0 var(--border);
    -webkit-mask-image: linear-gradient(to bottom, black 60%, transparent 100%);
    mask-image: linear-gradient(to bottom, black 60%, transparent 100%);
  }

  .nav-inner {
    display: flex;
    align-items: center;
    gap: 2rem;
  }

  .nav-logo {
    display: flex;
    align-items: center;
    flex-shrink: 0;
    text-decoration: none;
    transition: opacity 200ms;
  }
  .nav-logo:hover { opacity: 0.75; }

  .nav-links {
    display: flex;
    list-style: none;
    gap: 1.75rem;
    margin-left: auto;
  }

  .nav-links a {
    font-size: 0.875rem;
    color: var(--fg-muted);
    transition: color 200ms;
    text-decoration: none;
  }
  .nav-links a:hover { color: var(--fg); }

  .theme-toggle {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 999px;
    width: 2.2rem;
    height: 2.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    color: var(--fg-muted);
    transition: all 200ms;
    flex-shrink: 0;
  }
  .theme-toggle:hover { color: var(--accent-1); border-color: var(--accent-1); }

  /* Both hidden by default — only one shown per theme */
  .icon-sun, .icon-moon { display: none; }
  /* Dark / unset → sun */
  :global(:root:not([data-theme="light"])) .icon-sun  { display: block; }
  /* Light → moon */
  :global([data-theme="light"])            .icon-moon { display: block; }

  /* Dark mode nav — glass treatment */
  :root:not([data-theme="light"]) .theme-toggle {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border-color: rgba(255, 255, 255, 0.14);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }
  :root:not([data-theme="light"]) .nav.scrolled {
    background: rgba(8, 4, 24, 0.18);
    backdrop-filter: blur(80px) saturate(1.8);
    -webkit-backdrop-filter: blur(80px) saturate(1.8);
    box-shadow:
      inset 0 1.5px 0 rgba(255, 255, 255, 0.28),
      0 12px 40px rgba(0, 0, 0, 0.4);
  }
  :root:not([data-theme="light"]) .mobile-menu {
    background: rgba(8, 4, 24, 0.82);
    backdrop-filter: blur(40px);
    -webkit-backdrop-filter: blur(40px);
  }

  /* Light mode nav — glass treatment */
  [data-theme="light"] .theme-toggle {
    background: rgba(255, 255, 255, 0.55);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border-color: rgba(180, 165, 230, 0.4);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.9);
  }
  [data-theme="light"] .nav.scrolled {
    background: rgba(200, 185, 255, 0.12);
    backdrop-filter: blur(60px);
    -webkit-backdrop-filter: blur(60px);
    box-shadow:
      inset 0 1.5px 0 rgba(255, 255, 255, 0.95),
      0 12px 32px rgba(100, 80, 180, 0.12);
  }
  [data-theme="light"] .mobile-menu {
    background: rgba(250, 248, 255, 0.88);
    backdrop-filter: blur(40px);
    -webkit-backdrop-filter: blur(40px);
  }

  .hamburger {
    display: none;
    flex-direction: column;
    gap: 5px;
    background: none;
    border: none;
    cursor: pointer;
    padding: 4px;
    margin-left: 0.5rem;
  }
  .hamburger span {
    display: block;
    width: 22px;
    height: 2px;
    background: var(--fg-muted);
    border-radius: 2px;
    transition: background 200ms;
  }
  .hamburger:hover span { background: var(--fg); }

  /* Mobile menu */
  .mobile-menu {
    display: none;
    position: fixed;
    inset: 0;
    z-index: 200;
    background: var(--bg);
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 2rem;
  }
  .mobile-menu.open { display: flex; }
  .mobile-menu ul { list-style: none; text-align: center; display: flex; flex-direction: column; gap: 1.5rem; }
  .mobile-link { font-family: 'Fraunces', serif; font-size: 2rem; color: var(--fg-muted); transition: color 200ms; }
  .mobile-link:hover { color: var(--accent-1); }
  .mobile-close {
    position: absolute;
    top: 1.5rem;
    right: 1.5rem;
    font-size: 1.4rem;
    background: none;
    border: none;
    color: var(--fg-muted);
    cursor: pointer;
  }

  @media (max-width: 768px) {
    .nav-links { display: none; }
    .hamburger { display: flex; margin-left: auto; }
  }
</style>

<script>
  // Scroll effect
  const nav = document.getElementById('nav')!;
  window.addEventListener('scroll', () => nav.classList.toggle('scrolled', window.scrollY > 40), { passive: true });

  // Theme toggle — dark ↔ light
  const toggle = document.getElementById('themeToggle')!;
  toggle.addEventListener('click', () => {
    const current = document.documentElement.getAttribute('data-theme') ?? 'dark';
    const next = current === 'dark' ? 'light' : 'dark';
    document.documentElement.setAttribute('data-theme', next);
    localStorage.setItem('theme', next);
  });

  // Mobile menu
  const hamburger = document.getElementById('hamburger')!;
  const mobileMenu = document.getElementById('mobileMenu')!;
  const mobileClose = document.getElementById('mobileClose')!;
  const mobileLinks = document.querySelectorAll('.mobile-link');

  hamburger.addEventListener('click', () => mobileMenu.classList.add('open'));
  mobileClose.addEventListener('click', () => mobileMenu.classList.remove('open'));
  mobileLinks.forEach((l) => l.addEventListener('click', () => mobileMenu.classList.remove('open')));
</script>
