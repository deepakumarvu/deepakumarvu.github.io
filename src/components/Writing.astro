---
type Item = {
  type: 'article' | 'talk';
  title: string;
  description: string;
  date: string;
  readTime: string;
  url: string;
  source: string;
};

const items: Item[] = [
  {
    type: 'talk',
    title: 'Go Coverage in Integration Testing',
    description: 'Flash talk at GCI23 — walking through techniques for measuring Go code coverage in integration test suites.',
    date: 'Nov 2023',
    readTime: 'Flash Talk',
    url: 'https://www.youtube.com/watch?v=hyyDFiObmhE',
    source: 'GCI23 Conference',
  },
  {
    type: 'article',
    title: 'Matter and Certificate Revocation',
    description: 'How CRL and the Distributed Compliance Ledger protect the Matter IoT ecosystem from compromised certificates.',
    date: 'Oct 2023',
    readTime: '5 min read',
    url: 'https://developer.espressif.com/blog/matter-and-certificate-revocation/',
    source: 'Espressif Developer Blog',
  },
];
---

<section id="writing" class="section">
  <div class="container">
    <p class="section-label reveal">Talks &amp; Writing</p>
    <h2 class="text-xl font-display reveal" style="margin-bottom:2.5rem">Published work</h2>

    <div class="writing-list">
      {items.map((item, i) => (
        <a
          href={item.url}
          target="_blank"
          rel="noreferrer"
          class="card writing-card reveal"
          style={`transition-delay:${i * 80}ms`}
        >
          <div class="writing-top">
            <span class={`writing-type ${item.type}`}>
              {item.type === 'talk'
                ? <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
                : <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="15" y2="12"/><line x1="3" y1="18" x2="18" y2="18"/></svg>
              }
              {item.type === 'talk' ? 'Talk' : 'Article'}
            </span>
            <div class="writing-meta font-mono text-xs text-muted">
              <span>{item.date}</span>
              <span class="sep">·</span>
              <span>{item.readTime}</span>
              <span class="sep">·</span>
              <span>{item.source}</span>
            </div>
          </div>
          <h3 class="writing-title">{item.title} ↗</h3>
          <p class="writing-desc text-muted text-sm">{item.description}</p>
        </a>
      ))}
    </div>
  </div>
</section>

<style>
  .writing-list { display: flex; flex-direction: column; gap: 1rem; }

  .writing-card {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    text-decoration: none;
  }
  .writing-card:hover .writing-title { color: var(--accent-1); }

  .writing-top {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    flex-wrap: wrap;
  }

  .writing-type {
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    font-weight: 600;
    padding: 0.15rem 0.6rem;
    border-radius: 999px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
  .writing-type.talk    { background: var(--accent-2-glow); color: var(--accent-2); border: 1px solid var(--accent-2); }
  .writing-type.article { background: var(--accent-1-glow); color: var(--accent-1); border: 1px solid var(--accent-1); }

  .writing-meta { display: flex; flex-wrap: wrap; gap: 0.3rem; align-items: center; }
  .sep { color: var(--accent-1); }

  .writing-title {
    font-size: 1.05rem;
    font-weight: 600;
    transition: color 200ms;
  }

  .writing-desc { line-height: 1.6; }
</style>
